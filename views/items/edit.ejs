<%- include('../partials/header') %> 
<h1>Edit Page</h1>

<% if(item.isAuction){%> 
<div class="form-container"> 
    <form class="needs-validation text-center" method="POST" action="/items/<%= item.id %>/edit/game?_method=PUT" novalidate>
        <div class="form-row">
            <label for="validationCustom01">Name of Game</label>
            <input type="text" class="form-control" id="validationCustom01" value="<%= item.itemName %>" required name="itemName" readonly>
            <div class="valid-feedback">
            Looks good!
            </div>
            <label for="validationCustom02">Buy Out Price</label>
            <input type="text" class="form-control" id="validationCustom02" value="<%= item.price.trim() %>" required pattern="\d+\.?\d{0,2}" name="price">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="isAuction" id="defaultCheck1" checked>
            </div>
            <label for="validationCustom02"> Unheck to Delist From Auction (Delisting Will Remove All Bids!):</label>
            <div class="valid-feedback">
            Looks good!
            </div>
        </div>
        <div class="form-row">
            <label for="itemCondition">Item Condition</label>
            <select class="form-control form-control-sm" name="itemCondition">
                <option value="new">Like New</option>
                <option value="good" selected>Good</option>
                <option value="poor">Poor</option>
            </select>
        </div>
        <button class="btn btn-primary" type="submit">Update Game</button>
    </form>
  </div>
<% }else{ %> 
  <div class="form-container"> 
    <form class="needs-validation text-center" method="POST" action="/items/<%= item.id %>/edit/game?_method=PUT" novalidate>
        <div class="form-row">
            <label for="validationCustom01">Name of Game</label>
            <input type="text" class="form-control" id="validationCustom01" value="<%= item.itemName %>" required name="itemName" readonly>
            <div class="valid-feedback">
            Looks good!
            </div>
            <label for="validationCustom02">Buy Out Price</label>
            <input type="text" class="form-control" value="<%= item.price.trim() %>" required pattern="\d+\.?\d{0,2}" name="price">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="isAuction" id="defaultCheck1">
            </div>
            <label for="validationCustom02">Check for Auction and Place Starting Bid:</label>
            <input type="text" class="form-control" pattern="\d+\.?\d{0,2}" name="bid">
            <div class="valid-feedback">
            Looks good!
            </div>
      
        </div>
        <div class="form-row">
            <label for="itemCondition">Item Condition</label>
            <select class="form-control form-control-sm" name="itemCondition">
                <option value="new">Like New</option>
                <option value="good" selected>Good</option>
                <option value="poor">Poor</option>
            </select>
        </div>
        <button class="btn btn-primary" type="submit">Update Game</button>
    </form>
  </div>
<% } %> 

  <script>
  // Example starter JavaScript for disabling form submissions if there are invalid fields
  (function() {
    'use strict';
    window.addEventListener('load', function() {
      // Fetch all the forms we want to apply custom Bootstrap validation styles to
      var forms = document.getElementsByClassName('needs-validation');
      // Loop over them and prevent submission
      var validation = Array.prototype.filter.call(forms, function(form) {
        form.addEventListener('submit', function(event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        }, false);
      });
    }, false);
  })();
  </script>
<%- include('../partials/footer') %> 